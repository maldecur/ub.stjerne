<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ved fra Norge - Vår Bedrift</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header>
            <a href="#top" class="logo">
                <img src="logo.png" alt="ub.stjerne logo" class="logo-img">
            </a>
            <nav class="menu">
                <a href="#top">Hjem</a>
                <a href="#about">Om oss</a>
                <a href="#contacts">Kontakt</a>
            </nav>
        </header>

        <main class="hero" id="top">
            <div class="sector">
                <div class="hero-text">
                    <div class="hero-heading">
                        <h1>SALG AV VED</h1>
                        <p>Tørket ved av høy kvalitet – klar til bruk.</p>
                    </div>
                    <button class="btn" id="buyBtn">Bestill her</button>
                </div>
                <img src="drova.png" alt="Norsk ved">
            </div>
        </main>
        
        <div class="selektion" id="about">
            <h1>Om vår bedrift</h1>
            <div class="selektion-content">
                <p>Vi er en skoleklasse fra Videregående skole i Svolvær som rydder i området, feller uønskede trær, kløyver og tørker veden, og har startet denne lille bedriften for å selge den.</p>
                <img src="photo.jpg" alt="Vår gruppe i skogen">
            </div>
        </div>
        
        <div class="kontakt" id="contacts">
            <h2>Kontaktinformasjon</h2>
            <p>
                <strong>Kontaktperson (Maria):</strong> +47 252 45 542<br>
                <strong>E-post:</strong> kontakt@stjerne-ved.no<br>
                <strong>Telegram:</strong> @maria_ved
            </p>
            <p class="delivery-info">Vi leverer i Svolvær og omegn. Pris for levering avtales individuelt.</p>
        </div>

        <footer>
            Nettsted utviklet av: <a href="https://github.com/maldecur" target="_blank">github.com/maldecur</a>
        </footer>
    </div>  

    <!-- Modal for bestilling -->
    <div id="orderModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Bestillingsskjema</h2>
            <form id="orderForm" class="order-form">
                <!-- Steg 1: Kundeinfo og bestilling -->
                <div class="form-step active" id="step1">
                    <div class="form-group">
                        <label class="required">Fullt navn:</label>
                        <input type="text" id="name" name="name" required placeholder="Ditt fulle navn">
                    </div>
                    <div class="form-group">
                        <label class="required">Telefonnummer:</label>
                        <input type="tel" id="phone" name="phone" required placeholder="+47 123 45 678">
                        <small class="form-hint">Samme nummer som du bruker i Vipps.</small>
                    </div>
                    <div class="form-group">
                        <label class="required">E-postadresse:</label>
                        <input type="email" id="email" name="email" required placeholder="din@epost.no">
                    </div>
                    <div class="form-group">
                        <label class="required">Leveringsadresse:</label>
                        <input type="text" id="address" name="address" required placeholder="Gateadresse, poststed">
                    </div>

                    <!-- Velg vedtype -->
                    <div class="form-group">
                        <label class="required">Type ved:</label>
                        <div class="wood-options">
                            <label class="wood-option" for="woodType1">
                                <input type="radio" name="woodType" id="woodType1" value="birch" data-price="1500" required>
                                <div class="wood-type">Bjørkeved</div>
                                <div class="wood-price">1500 NOK/m³</div>
                                <div class="wood-description">Høy varmeeffekt, lang forbrenning</div>
                            </label>
                            <label class="wood-option" for="woodType2">
                                <input type="radio" name="woodType" id="woodType2" value="oak" data-price="1800">
                                <div class="wood-type">Eikeved</div>
                                <div class="wood-price">1800 NOK/m³</div>
                                <div class="wood-description">Premium kvalitet, best varmeeffekt</div>
                            </label>
                            <label class="wood-option" for="woodType3">
                                <input type="radio" name="woodType" id="woodType3" value="mixed" data-price="1200">
                                <div class="wood-type">Blandet ved</div>
                                <div class="wood-price">1200 NOK/m³</div>
                                <div class="wood-description">Godt og rimelig alternativ</div>
                            </label>
                        </div>
                    </div>

                    <!-- Velg mengde -->
                    <div class="form-group">
                        <label class="required">Mengde (m³):</label>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn" id="decreaseQty">-</button>
                            <input type="number" name="quantity" id="quantity" class="quantity-input" value="1" min="1" max="10" required>
                            <button type="button" class="quantity-btn" id="increaseQty">+</button>
                        </div>
                    </div>

                    <!-- Ordresammendrag -->
                    <div class="order-summary">
                        <div class="summary-row">
                            <span>Totalpris:</span>
                            <span id="totalAmount" class="total-amount">0 NOK</span>
                        </div>
                        <p class="summary-note">Prisen inkluderer ikke eventuell leveringsavgift.</p>
                    </div>

                    <button type="button" class="form-btn" id="nextToPayment">Fortsett til betaling</button>
                </div>

                <!-- Steg 2: Betaling med Vipps -->
                <div class="form-step" id="step2">
                    <div class="payment-instruction">
                        <h3><i class="fas fa-mobile-alt"></i> Betal med Vipps</h3>
                        <p>Din bestilling er klar! For å fullføre, vennligst:</p>
                        <ol>
                            <li><strong>Skann QR-koden nedenfor</strong> med Vipps-appen</li>
                            <li>Eller <strong>betalt til telefonnummeret</strong> som vises</li>
                            <li><strong>Skriv inn beløpet:</strong> <span id="finalAmount" class="total-amount">0 NOK</span></li>
                            <li>Skriv <strong>"Vedbestilling"</strong> som melding</li>
                        </ol>
                        <p class="warning-note"><i class="fas fa-exclamation-circle"></i> Husk å angi riktig beløp i Vipps!</p>
                    </div>

                    <div class="vipps-payment-box">
                        <!-- BYTT UT "din-vipps-qr-kode.png" MED DIN EGEN FIL! -->
                        <img src="din-vipps-qr-kode.png" alt="Vipps QR-kode for betaling" class="vipps-qr-code">
                        <div class="vipps-info">
                            <p><i class="fas fa-phone"></i> <strong>Vipps til:</strong> +47 252 45 542</p>
                            <p><i class="fas fa-user"></i> <strong>Mottaker:</strong> ub.stjerne</p>
                            <p><i class="fas fa-file-invoice"></i> <strong>Melding:</strong> Vedbestilling</p>
                        </div>
                    </div>

                    <div class="confirmation-box">
                        <p><strong>Når du har betalt:</strong></p>
                        <div class="form-group">
                            <input type="checkbox" id="paymentConfirmed" name="paymentConfirmed">
                            <label for="paymentConfirmed">Jeg har gjennomført betalingen i Vipps</label>
                        </div>
                    </div>

                    <div class="form-buttons">
                        <button type="button" class="form-btn secondary" id="backToOrder">Tilbake</button>
                        <button type="submit" class="form-btn" id="completeOrder" disabled>
                            <i class="fas fa-check"></i> Fullfør bestilling
                        </button>
                    </div>
                </div>

                <div id="orderStatus"></div>
            </form>
        </div>
    </div>

    <script>
        // Data og initielle variabler
        const woodTypes = {
            'birch': { name: 'Bjørkeved', price: 1500 },
            'oak': { name: 'Eikeved', price: 1800 },
            'mixed': { name: 'Blandet ved', price: 1200 }
        };

        let selectedWood = null;
        let quantity = 1;
        let totalAmount = 0;

        // DOM-elementer
        const modal = document.getElementById('orderModal');
        const buyBtn = document.getElementById('buyBtn');
        const closeBtn = document.getElementById('closeModal');
        const orderForm = document.getElementById('orderForm');
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const nextBtn = document.getElementById('nextToPayment');
        const backBtn = document.getElementById('backToOrder');
        const completeBtn = document.getElementById('completeOrder');
        const paymentCheckbox = document.getElementById('paymentConfirmed');
        const statusDiv = document.getElementById('orderStatus');

        const woodTypeRadios = document.querySelectorAll('input[name="woodType"]');
        const quantityInput = document.getElementById('quantity');
        const decreaseBtn = document.getElementById('decreaseQty');
        const increaseBtn = document.getElementById('increaseQty');
        const totalAmountSpan = document.getElementById('totalAmount');
        const finalAmountSpan = document.getElementById('finalAmount');

        // Funksjoner for å beregne pris
        function calculateTotal() {
            if (selectedWood && woodTypes[selectedWood]) {
                const wood = woodTypes[selectedWood];
                totalAmount = wood.price * quantity;
                totalAmountSpan.textContent = totalAmount + ' NOK';
                finalAmountSpan.textContent = totalAmount + ' NOK';
                return totalAmount;
            }
            totalAmountSpan.textContent = '0 NOK';
            finalAmountSpan.textContent = '0 NOK';
            return 0;
        }

        function updateOrderSummary() {
            calculateTotal();
            if (selectedWood) {
                nextBtn.disabled = false;
            } else {
                nextBtn.disabled = true;
            }
        }

        // Hendelseslyttere for bestillingsdetaljer
        woodTypeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                selectedWood = this.value;
                document.querySelectorAll('.wood-option').forEach(opt => opt.classList.remove('selected'));
                this.closest('.wood-option').classList.add('selected');
                updateOrderSummary();
            });
        });

        decreaseBtn.onclick = () => {
            if (quantity > 1) {
                quantity--;
                quantityInput.value = quantity;
                updateOrderSummary();
            }
        };

        increaseBtn.onclick = () => {
            if (quantity < 10) {
                quantity++;
                quantityInput.value = quantity;
                updateOrderSummary();
            }
        };

        quantityInput.addEventListener('input', function() {
            quantity = parseInt(this.value) || 1;
            if (quantity < 1) quantity = 1;
            if (quantity > 10) quantity = 10;
            this.value = quantity;
            updateOrderSummary();
        });

        // Navigasjon mellom steg
        nextBtn.onclick = function() {
            if (!selectedWood) {
                alert('Vennligst velg type ved før du fortsetter.');
                return;
            }
            step1.classList.remove('active');
            step2.classList.add('active');
            calculateTotal(); // Oppdater beløpet i steg 2
        };

        backBtn.onclick = function() {
            step2.classList.remove('active');
            step1.classList.add('active');
        };

        // Bekreftelse av betaling
        paymentCheckbox.addEventListener('change', function() {
            completeBtn.disabled = !this.checked;
        });

        // Åpne/lukke modal
        buyBtn.onclick = function(e) {
            e.preventDefault();
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            resetFormToStep1();
        };

        closeBtn.onclick = closeModal;
        window.onclick = function(event) {
            if (event.target == modal) closeModal();
        };
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') closeModal();
        });

        function closeModal() {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        document.querySelector('.modal-content').addEventListener('click', function(event) {
            event.stopPropagation();
        });

        // Send ordre
        orderForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const orderData = {
                name: document.getElementById('name').value.trim(),
                phone: document.getElementById('phone').value.trim(),
                email: document.getElementById('email').value.trim(),
                address: document.getElementById('address').value.trim(),
                woodType: woodTypes[selectedWood].name,
                quantity: quantity,
                totalAmount: totalAmount,
                timestamp: new Date().toLocaleString('no-NO')
            };

            // Her ville man i en virkelig løsning sendt data til en server
            console.log('Bestilling mottatt:', orderData);

            // Vis bekreftelse
            statusDiv.innerHTML = `
                <div class="success-message">
                    <h3><i class="fas fa-check-circle"></i> Bestilling registrert!</h3>
                    <p>Takk for bestillingen din på <strong>${totalAmount} NOK</strong>.</p>
                    <p>Vi har mottatt din betalingsbekreftelse og kontakter deg innen 24 timer for å avtale levering.</p>
                    <p><strong>Bestillingsreferanse:</strong> VED-${Date.now().toString().slice(-6)}</p>
                </div>
            `;

            // Nullstill skjema etter 5 sekunder
            setTimeout(() => {
                orderForm.reset();
                closeModal();
                resetFormToStep1();
                statusDiv.innerHTML = '';
            }, 5000);
        });

        // Hjelpefunksjon for å nullstille skjema
        function resetFormToStep1() {
            step2.classList.remove('active');
            step1.classList.add('active');
            selectedWood = null;
            quantity = 1;
            quantityInput.value = 1;
            document.querySelectorAll('.wood-option').forEach(opt => opt.classList.remove('selected'));
            paymentCheckbox.checked = false;
            completeBtn.disabled = true;
            updateOrderSummary();
        }

        // Initialisering
        updateOrderSummary();
    </script>
</body>
</html>
